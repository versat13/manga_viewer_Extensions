# マンガ見開きビューア - Chrome拡張機能

マンガの画像が並んでいる形式のサイトを見開き型のビューアで表示します。

## 基本的な使い方

### 1. ビューアを起動する

サイト上で「ビューア起動」または「ボタン表示」によりページ右上に表示されたボタンをクリックするとビューアが起動します。

起動前
<img width="1395" height="909" alt="スクリーンショット 2025-10-03 135122" src="https://github.com/user-attachments/assets/9ed3b3aa-aa2a-4414-a711-fbc4063cb947" />
起動後
<img width="1395" height="895" alt="スクリーンショット 2025-10-03 134441" src="https://github.com/user-attachments/assets/77c0e8c4-faad-4147-9f55-b72d950daf56" />
（ビューアの下部にあるナビゲーションバーは3秒経過で非表示になります）

### 2. ビューアの操作

**マウス操作：**
- 画面左半分をクリック：次のページへ
- 画面右半分をクリック：前のページへ
- マウスホイール上：前のページへ
- マウスホイール下：次のページへ

**キーボード操作：**
- `←`（左矢印）または `スペース`：次のページへ
- `→`（右矢印）：前のページへ
- `↓`（下矢印）：次の1ページだけ送る
- `↑`（上矢印）：前の1ページだけ戻る
- `Esc`：ビューアを閉じる

### 3. ビューアの各説明

ビューア起動中、画面の端に以下のボタンが表示されます：

**右上エリア：**
- `×`：ビューアを閉じる
- `全読込ボタン`：ページ全体の画像を強制的に読み込む

**右下エリア：**
- `⛶`：フルスクリーン表示の切り替え
- ページ数表示（例：`001/045`）
　※実際のページ数より少ない場合、全読込ボタンを何度か押してみてください。

**左下エリア：**
- `DL`：ダウンロードパネルの起動
- `背景：黒` / `背景：白`：背景色の切り替え
- `単` / `見開き`：表示モードの切り替え

**下部中央：**
- ナビゲーションバー（自動で薄くなります）
  - `←次` / `←次`：次ページ
  - `←単`：見開き表示で1ページだけ進む
  - `単→`：見開き表示で1ページだけ戻る
  - `戻→` / `戻→`：前ページ
  - プログレスバー：スライダをドラッグ可能

**ダウンロードパネル：**
<img width="312" height="445" alt="スクリーンショット 2025-10-03 134654" src="https://github.com/user-attachments/assets/d495a082-8c00-4767-8783-265ac7958eba" />


## メインパネル

<img width="312" height="445" alt="スクリーンショット 2025-10-03 134654" src="https://github.com/user-attachments/assets/728d610e-224c-400f-8d72-6af877cbc921" />

### メイン操作
- **ビューア起動**：現在のページでビューアを開始
- **検出テスト**：各方法で何枚の画像が見つかるかテスト実行（基本的に使いません）

### サイト設定
- **ボタン表示**：このサイトで右上に常時起動ボタンを表示
- **ボタン非表示**：起動ボタンを表示しない（拡張機能メニューからのみ起動）

### 画像検出設定

サイトによって画像の配置方法が異なるため、最適な検出方法を選択できます：

- **自動検出**（推奨）：全ての方法を試して最も多く画像が見つかった方法を使用
- **スマート検出**：ブラウザが読み込んだ画像リソースから検出（高速）
- **ディープスキャン**：ページのHTMLソースから画像URLを検索（網羅的）
- **基本型**：ページ上の画像タグを直接検索（軽量）
- **フレーム型**：埋め込まれたフレーム内の画像を検索
- **エリア型**：特定の領域内の画像のみ検索（`.reading-content`等）
- **チャプター型**：チャプター領域内の画像のみ検索
- **リーダー型**：マンガリーダー領域内の画像のみ検索
- **エントリー型**：記事領域内の画像のみ検索
- **Canvasモード**：Canvas要素から画像を抽出（ニコニコ静画などで対応しますが、現状うまく機能しません）

### 表示設定
- **単ページ**：1ページずつ表示
- **見開き**：2ページを並べて表示（日本マンガ標準の右→左）

## よくある使用場面と対処法

### 画像が表示されない場合

1. **検出テストを実行**
   - 設定画面で「検出テスト」をクリック
   - 結果を見て画像が見つかっている方法を確認
   - その方法に手動で切り替え

2. **全読込を実行**
   - ビューア右上の「全読込」ボタンをクリック
   - ページ全体を自動スクロールして未読み込み画像を取得

3. **手動での画像読み込み**
   - ビューアを起動する前に、ページを最下部までスクロールしておく
   - 全ての画像の読み込みフラグが立ってからビューアを起動（ニコニコ静画等）

### 画像が小さすぎる場合

- ページの表示自体の拡大機能で対応（Ctrl+ホイール）

### 特定サイトでうまく動かない

1. 検出モードを「自動検出」以外に変更
2. そのサイトの構造に合った方法を選択：
   - 一般的なマンガサイト：「基本型」または「スマート検出」
   - 埋め込み表示：「フレーム型」
   - 特殊な表示方法：「ディープスキャン」
   - ニコニコ静画：「Canvasモード」

## インストール方法

1. 以下のファイルを同じフォルダに保存してください：
   - `manifest.json`
   - `content.js` 
   - `popup.html`
   - `popup.js`
   - アイコンファイル3つ（`icon16.png`, `icon48.png`, `icon128.png`）

2. Chromeで `chrome://extensions/` を開きます

3. 右上の「デベロッパーモード」をONにします

4. 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック

5. ファイルを保存したフォルダを選択します

## トラブルシューティング

### ビューアが起動しない
- ページが完全に読み込まれてから実行
- 他の拡張機能を一時的に無効化して確認
- ページをリロードしてから再試行

### 操作が重い
- 「基本型」検出モードに変更
- 「単ページ」表示に切り替え
- 「全読込」の使用を避ける

## 注意事項

- サイトの利用規約を遵守してご使用ください
- 一部のサイトでは技術的制限により動作しない場合があります
